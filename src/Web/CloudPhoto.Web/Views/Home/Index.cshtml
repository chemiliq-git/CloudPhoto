@using CloudPhoto.Common
@using CloudPhoto.Web.ViewModels.Home

@model List<HomeIndexViewModel>

@{
    this.ViewData["Title"] = "Home Page";
    int imagePerPage = GlobalConstants.ImagePerPage;
}

<form id="keyForm" method="post"></form>

<br />

<div class="row container-fluid">
    <div class="col-12">
        <h2>Popular Category</h2>
    </div>
    @{
        foreach (HomeIndexViewModel categoryInfo in Model)
        {
            if (categoryInfo.CategoryInfo != null
                && categoryInfo.CategoryImages.Count > 0)
            {
                <a href="#" onclick="pageHelper.clickToCategory('@categoryInfo.CategoryInfo.Id');">
                    <div class="col-md-12 container row m-2">
                        <div id=@categoryInfo.CategoryInfo.Id class="col-md-12 bg-success rounded-sm p-1">
                            <h3 class="text-center"> @categoryInfo.CategoryInfo.Name</h3>
                        </div>
                        @{
                            foreach (ImageHomeViewModel image in categoryInfo.CategoryImages)
                            {
                                <div class="col-md-4 p-1">
                                    <img src=@image.ThumbnailImageUrl class="img-fluid">
                                </div>
                            }
                        }

                    </div>
                </a>
                <div class="m-2"></div>
            }
        }
    }
</div>

@section Scripts {
    <script type="text/javascript" src="~/js/homeIndexView.js"></script>
    <script>
       var pageHelper = new HomeIndexViewHelper(@imagePerPage);
    </script>
}